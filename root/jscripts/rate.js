function v3rmratepost(inpid,option,cksm){let upBtn=$("#upboat"+inpid+" i");let dwnBtn=$("#downboat"+inpid+" i");let downCount=$("#downcount"+inpid);let upCount=$("#upcount"+inpid);if(option=="-1"&&dwnBtn.hasClass("fa-thumbs-down")){return;}
if(option=="1"&&upBtn.hasClass("fa-thumbs-up")){return;}
$(document).ready(function(){if(window.processingLike){return;}
window.processingLike=true;$.post("xmlhttp.php",{action:"v3rmlikes_rate",pid:inpid,opt:option,cksm:cksm,my_post_key:my_post_key},function(data,status){window.processingLike=false;try{if(data["success"]=="true"){if(data["switch"]=="-"){if(upBtn.hasClass("fa-thumbs-up")){upCount.text(" "+(parseInt(upCount.text())-1)+" ");upBtn.removeClass("fa-thumbs-up");upBtn.addClass("fa-thumbs-o-up");}
dwnBtn.removeClass("fa-thumbs-o-down");dwnBtn.addClass("fa-thumbs-down");downCount.text(" "+(parseInt(downCount.text())+1)+" ");}
if(data["switch"]=="+"){if(dwnBtn.hasClass("fa-thumbs-down")){downCount.text(" "+(parseInt(downCount.text())-1)+" ");dwnBtn.removeClass("fa-thumbs-down");dwnBtn.addClass("fa-thumbs-o-down");}
upBtn.removeClass("fa-thumbs-o-up");upBtn.addClass("fa-thumbs-up");upCount.text(" "+(parseInt(upCount.text())+1)+" ");}}else if(data["errors"]=="cooldown"){document.getElementById("like_buttons"+inpid).style.display="inline";document.getElementById("like_buttons"+inpid).innerText="You must wait "+data["timeleft"]+" minutes to rate again.";}else if(data["errors"]=="ownpost"){document.getElementById("like_buttons"+inpid).style.display="inline";document.getElementById("like_buttons"+inpid).innerText="You cannot rate your own post.";}else{document.getElementById("like_buttons"+inpid).innerHTML="";document.getElementById("like_buttons"+inpid).style.display="inline";document.getElementById("like_buttons"+inpid).innerHTML="An error occured: "+data["errors"];console.log(data);}}catch(error){document.getElementById("like_buttons"+inpid).innerHTML="";document.getElementById("like_buttons"+inpid).style.display="inline";document.getElementById("like_buttons"+inpid).innerHTML="An unknown error occured.";}});});}